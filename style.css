:root {
  --maxw: 1100px; /* fixed layout width */
  --blue-50: #f6faff;
  --blue-100: #dcecff;
  --blue-300: #a9cbf7;
  --blue-500: #79aee8;
  --blue-700: #2a5c99;
  --blue-900: #133a6e;
  --white: #ffffff;
}

/* -------------------------------------------------- */
/* GLOBAL LAYOUT & WALLPAPER */
/* -------------------------------------------------- */

/* Fixed canvas width, allow horizontal scroll but no squish */
html, body {
  width: 100%;
  min-width: var(--maxw);
  margin: 0;
  font-family: 'Poppins', sans-serif;
  overflow-x: auto;
  overflow-y: visible;
}

/* Full viewport wallpaper that fits any zoom */
body {
      background: url("wallpaper.jpg") no-repeat center center fixed;
      background-size: cover;
}

.page {
  width: var(--maxw);
  margin: 0 auto;
  padding: 30px 20px 60px;
  min-height: 100vh;
}

/* Pure grid reset to avoid extra spacing */
.pure-g { margin-left: 0; margin-right: 0; }

/* -------------------------------------------------- */
/* HERO HEADER */
/* -------------------------------------------------- */
.hero {
  background-color: var(--blue-100);
  color: var(--blue-900);
  box-shadow: 0 2px 12px rgba(0,0,0,0.1);
  border-radius: 12px;
  padding: 25px 20px 20px;
  text-align: center;
  margin-bottom: 20px;
}

.hero-eyebrow {
  font-weight: 700;
  font-size: 14px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--blue-700);
  margin-bottom: 6px;
}

.hero-title {
  font-weight: 800;
  font-size: 55px;
  line-height: 1.1;
  margin: 5px 0 8px;
  color: var(--blue-900);
}

.hero-title .accent { color: var(--blue-500); }

.hero-subtitle {
  font-weight: 600;
  font-size: 20px;
  color: var(--blue-700);
  opacity: .95;
  display: inline-block;
  background: linear-gradient(var(--blue-300), var(--blue-300)) center bottom / 200px 4px no-repeat;
  padding-bottom: 25px;
}

/* -------------------------------------------------- */
/* UNIFIED CARDS */
/* -------------------------------------------------- */
.card.unified {
  background: var(--white);
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0,0,0,.08);
  overflow: hidden;
  margin-top: 20px;
}

.block {
  padding: 22px 24px;
  border-bottom: 1px solid rgba(0,0,0,.06);
}
.block:last-of-type { border-bottom: 0; }

/* -------------------------------------------------- */
/* STORYTELLING (TEXT SECTIONS) */
/* -------------------------------------------------- */
.storytelling {
  padding: 22px 28px;
}
.storytelling h2 {
  font-weight: 800;
  font-size: 28px;
  line-height: 1.2;
  margin: 0 0 10px;
  color: var(--blue-900);
  text-align: left;
}
.storytelling p {
  margin: 8px 0;
  color: var(--blue-700);
  font-weight: 600;
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
}

/* -------------------------------------------------- */
/* MAP VISUALIZATION */
/* -------------------------------------------------- */
.story-map {
  width: 100%;
  height: 560px;
  background: #ffffff;
  margin: 0 auto;
  display: block;
  position: relative;
}
.story-map .vega-embed,
.story-map canvas,
.story-map svg {
  display: block;
  margin: 0 auto;
  background: #ffffff !important;
}


/* ===== LOLLIPOP + RIGHT-SIDE INSIGHTS (separate card) ===== */

/* Hide the old inline chart title now that it's moved */
.chart-title { 
  display: none !important;
}

/* Disable Pure.css responsive behavior */
.pure-g {
  display: flex !important;
  flex-wrap: nowrap !important;
  justify-content: flex-start;
  align-items: flex-start;
  gap: 24px; /* adds space between chart and insight card */
}

/* Left chart: flexible width */
.pure-g > .pure-u-1.pure-u-md-2-3 {
  flex: 1 1 auto !important;
  min-width: 0;
}

/* Fixed right insights box */
.pure-g > .pure-u-1.pure-u-md-1-3 {
  flex: none !important;
  width: 340px !important;     /* fixed size */
  min-width: 340px !important;
  max-width: 340px !important;
}

/* Keep both cards top aligned */
.card.unified {
  flex: 1 1 auto;
  align-self: flex-start;
}

/* Insight card content */
.insight-card .block {
  padding: 32px 28px 40px 28px;
}

/* Section header style inside box */
.insight-card .insight-title {
  font-weight: 800;
  font-size: 28px;
  line-height: 1.25;
  margin: 0 0 12px;
  color: var(--blue-900);
}

/* Insights tidy spacing */
.insight-card .insight-list {
  margin: 0 0 18px;
  padding: 0;
  list-style-type: disc;
  color: var(--blue-700);
  font-weight: 600;
}
.insight-card .insight-list li { margin: 8px 0; }

/* Keep chart styling intact */
.story-lollipop {
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
  width: 100%;
  height: 480px;
}

.insight-footnote {
  margin-top: 6px;
  font-size: 12.5px;
  color: var(--blue-700);
  opacity: .85;
}

/* Section spacing */
section.pure-g { margin-top: 24px; }


/* Stacked bar chart container (below lollipop) */
.story-stacked {
  width: 100%;
  height: auto;          /* adjust if needed */
  background: #fff;
  margin: 18px auto 0;     /* small gap below lollipop */
  display: block;
  position: relative;

  /* Rounded + clean frame (matches your cards) */
  overflow: hidden;        /* ensures chart corners are rounded */
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

/* Keep embedded Vega centered + rounded */
.story-stacked .vega-embed,
.story-stacked canvas,
.story-stacked svg {
  display: block;
  margin: 0 auto;
  background: #fff !important;
  border-radius: 12px;
  overflow: hidden;
}

/* -------------------------------------------------- */
/* Stacked chart + storytelling grid */
/* -------------------------------------------------- */
.storytelling-below { margin-top: 0; }

.storytelling-below .block.storytelling { padding-top: 18px; }

.storytelling-below h2 {
  margin-top: 0;
  font-weight: 800;
  font-size: 28px;
  color: var(--blue-900);
}

.storytelling-below p {
  color: var(--blue-700);
  font-weight: 600;
  margin: 8px 0;
  text-align: justify;
  text-justify: inter-word;
}

/* -------------------------------------------------- */
/* RADIAL (DONUT) CHART â€” enlarged and centered */
/* -------------------------------------------------- */
.story-radial {
  display: flex;
  justify-content: center;     /* center horizontally */
  align-items: center;          /* center vertically */
  height: 600px;                /* increased from 480px */
  width: 600px;                  /* allow full container width */
  background: #fff;
  position: relative;
  overflow: hidden;             /* prevents layout push from oversized svg */
  border-radius: 12px;          /* match card rounding */
}

/* Vega-Embed wraps the chart in one or more divs; make them flex-centered too */
.story-radial > div {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}

/* Stop the wrapper from stretching full-width so it can be centered */
.story-radial .vega-embed {
  display: block;
  margin: 0 auto !important;
  width: 90% !important;        /* occupy most of the container */
  height: 90% !important;       /* enlarge chart height proportionally */
  max-width: 100%;
  max-height: 100%;
}

/* Ensure the visual itself behaves */
.story-radial canvas,
.story-radial svg {
  display: block;
  margin: 0 auto !important;
  height: 100% !important;
  width: 100% !important;
  max-width: 100%;
  max-height: 100%;
}

/* Assuming a flex container for both panels */
.story-row {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 24px; /* space between text and chart */
}

/* Story text box smaller */
.story-text {
  flex: 0 0 35%;       /* was maybe 50%, reduce to 35% */
  font-size: 0.9rem;   /* slightly smaller font for compactness */
  line-height: 1.4;
  padding: 16px 20px;  /* reduce padding */
}

/* Chart container gets more room */
.story-radial {
  flex: 0 0 60%;       /* increase from 50% to 60% */
}
